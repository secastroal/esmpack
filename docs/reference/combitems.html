<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Combine Several Items — combitems • esmpack</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/cosmo/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" />


<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Combine Several Items — combitems" />
<meta property="og:description" content="Function to combine several items (e.g., by taking their mean)." />






<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



<!-- dependencies from examples -->


  

  

  </head>

  <body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">esmpack</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1-16</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/esmpack-package.html">Intro</a>
</li>
<li>
  <a href="../reference/index.html">Functions</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://twitter.com/wviechtb">
    <span class="fas fa-twitter"></span>
     
  </a>
</li>
<li>
  <a href="https://github.com/wviechtb/esmpack">
    <span class="fas fa-github"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Combine Several Items</h1>
    
    <div class="hidden name"><code>combitems.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Function to combine several items (e.g., by taking their mean).</p>
    </div>

    <pre class="usage"><span class='fu'>combitems</span><span class='op'>(</span><span class='va'>items</span>, <span class='va'>data</span>, grep<span class='op'>=</span><span class='cn'>FALSE</span>, fun<span class='op'>=</span><span class='va'>mean</span>, na.rm<span class='op'>=</span><span class='cn'>TRUE</span>, <span class='va'>min.k</span>, verbose<span class='op'>=</span><span class='cn'>TRUE</span><span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>items</th>
      <td><p>either a character vector (giving the names of the variables to be combined) or a numeric vector (giving the position of the columns in the data frame corresponding to the items).</p></td>
    </tr>
    <tr>
      <th>data</th>
      <td><p>data frame that contains the items to be combined.</p></td>
    </tr>
    <tr>
      <th>grep</th>
      <td><p>logical indicating whether item names should be matched using <code><a href='https://rdrr.io/r/base/grep.html'>grep</a></code> (default is <code>FALSE</code>).</p></td>
    </tr>
    <tr>
      <th>fun</th>
      <td><p>the function to be applied to the items (default is <code>mean</code>).</p></td>
    </tr>
    <tr>
      <th>na.rm</th>
      <td><p>logical indicating whether missing values should be removed before applying the function (default is <code>TRUE</code>).</p></td>
    </tr>
    <tr>
      <th>min.k</th>
      <td><p>optional integer specifying the minimum number of items that must be available (i.e., not missing). If not specified, no minimum is required.</p></td>
    </tr>
    <tr>
      <th>verbose</th>
      <td><p>logical indicating whether information about the items that were combined should be reported (default is <code>TRUE</code>).</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>The function can be used to combine several items (usually by taking their mean or their sum) into a new variable (the default is to take the mean).</p>
<p>The items to be combined are specified via the <code>items</code> argument, either as a character vector with the variable names or as a numeric vector giving the item position in the data frame. One can also just specify substrings for the item names, which are matched (if possible) against the variable names in the data frame. See &#8216;Examples&#8217;.</p>
<p>The function to be applied to the items is specified via the <code>fun</code> argument and must be a function that returns a single number.</p>
<p>At times, one may require that a certain number of items must be available (i.e., not missing) before computing the function. This can be specified via the <code>min.k</code> argument.</p>
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>The function returns a vector (that will typically be added back to the data frame as a new variable).</p>
    <h2 class="hasAnchor" id="author"><a class="anchor" href="#author"></a>Author</h2>

    <p>Wolfgang Viechtbauer <a href='mailto:wvb@wvbauer.com'>wvb@wvbauer.com</a> <br /></p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='co'># illustrative dataset</span>
<span class='va'>dat</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/structure.html'>structure</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span>id<span class='op'>=</span><span class='fl'>1</span><span class='op'>:</span><span class='fl'>10</span>,
   mood_cheerf  <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>5</span>, <span class='fl'>6</span>, <span class='fl'>6</span>, <span class='fl'>6</span>,  <span class='fl'>7</span>, <span class='fl'>6</span>,  <span class='fl'>7</span>, <span class='fl'>7</span>, <span class='fl'>6</span>, <span class='fl'>7</span><span class='op'>)</span>,
   mood_relaxed <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>6</span>, <span class='fl'>6</span>, <span class='fl'>6</span>, <span class='fl'>7</span>,  <span class='fl'>7</span>, <span class='cn'>NA</span>, <span class='fl'>5</span>, <span class='fl'>5</span>, <span class='fl'>5</span>, <span class='fl'>6</span><span class='op'>)</span>,
   mood_satisfi <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>6</span>, <span class='fl'>6</span>, <span class='fl'>5</span>, <span class='cn'>NA</span>, <span class='fl'>7</span>, <span class='cn'>NA</span>, <span class='fl'>6</span>, <span class='fl'>6</span>, <span class='fl'>5</span>, <span class='fl'>6</span><span class='op'>)</span><span class='op'>)</span>,
   row.names <span class='op'>=</span> <span class='fl'>1</span><span class='op'>:</span><span class='fl'>10</span>, class <span class='op'>=</span> <span class='st'>"data.frame"</span><span class='op'>)</span>
<span class='va'>dat</span>
</div><div class='co'>#&gt;    id mood_cheerf mood_relaxed mood_satisfi
#&gt; 1   1           5            6            6
#&gt; 2   2           6            6            6
#&gt; 3   3           6            6            5
#&gt; 4   4           6            7           NA
#&gt; 5   5           7            7            7
#&gt; 6   6           6           NA           NA
#&gt; 7   7           7            5            6
#&gt; 8   8           7            5            6
#&gt; 9   9           6            5            5
#&gt; 10 10           7            6            6</div><div class='input'>
<span class='co'># compute the average of the three mood items and add</span>
<span class='co'># this as a new variable (called 'pa') to the dataset</span>
<span class='va'>dat</span><span class='op'>$</span><span class='va'>pa</span> <span class='op'>&lt;-</span> <span class='fu'>combitems</span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"mood_cheerf"</span>, <span class='st'>"mood_relaxed"</span>, <span class='st'>"mood_satisfi"</span><span class='op'>)</span>, data<span class='op'>=</span><span class='va'>dat</span><span class='op'>)</span>
</div><div class='co'>#&gt; Computed 'mean' for these items: mood_cheerf, mood_relaxed, mood_satisfi.</div><div class='input'><span class='va'>dat</span>
</div><div class='co'>#&gt;    id mood_cheerf mood_relaxed mood_satisfi       pa
#&gt; 1   1           5            6            6 5.666667
#&gt; 2   2           6            6            6 6.000000
#&gt; 3   3           6            6            5 5.666667
#&gt; 4   4           6            7           NA 6.500000
#&gt; 5   5           7            7            7 7.000000
#&gt; 6   6           6           NA           NA 6.000000
#&gt; 7   7           7            5            6 6.000000
#&gt; 8   8           7            5            6 6.000000
#&gt; 9   9           6            5            5 5.333333
#&gt; 10 10           7            6            6 6.333333</div><div class='input'>
<span class='co'># can also grep for the item names</span>
<span class='va'>dat</span><span class='op'>$</span><span class='va'>pa</span> <span class='op'>&lt;-</span> <span class='fu'>combitems</span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"cheerf"</span>, <span class='st'>"relaxed"</span>, <span class='st'>"satisfi"</span><span class='op'>)</span>, data<span class='op'>=</span><span class='va'>dat</span>, grep<span class='op'>=</span><span class='cn'>TRUE</span><span class='op'>)</span>
</div><div class='co'>#&gt; Computed 'mean' for these items: mood_cheerf, mood_relaxed, mood_satisfi.</div><div class='input'><span class='va'>dat</span>
</div><div class='co'>#&gt;    id mood_cheerf mood_relaxed mood_satisfi       pa
#&gt; 1   1           5            6            6 5.666667
#&gt; 2   2           6            6            6 6.000000
#&gt; 3   3           6            6            5 5.666667
#&gt; 4   4           6            7           NA 6.500000
#&gt; 5   5           7            7            7 7.000000
#&gt; 6   6           6           NA           NA 6.000000
#&gt; 7   7           7            5            6 6.000000
#&gt; 8   8           7            5            6 6.000000
#&gt; 9   9           6            5            5 5.333333
#&gt; 10 10           7            6            6 6.333333</div><div class='input'>
<span class='co'># even shorter</span>
<span class='va'>dat</span><span class='op'>$</span><span class='va'>pa</span> <span class='op'>&lt;-</span> <span class='fu'>combitems</span><span class='op'>(</span><span class='st'>"mood"</span>, data<span class='op'>=</span><span class='va'>dat</span>, grep<span class='op'>=</span><span class='cn'>TRUE</span><span class='op'>)</span>
</div><div class='co'>#&gt; Computed 'mean' for these items: mood_cheerf, mood_relaxed, mood_satisfi.</div><div class='input'><span class='va'>dat</span>
</div><div class='co'>#&gt;    id mood_cheerf mood_relaxed mood_satisfi       pa
#&gt; 1   1           5            6            6 5.666667
#&gt; 2   2           6            6            6 6.000000
#&gt; 3   3           6            6            5 5.666667
#&gt; 4   4           6            7           NA 6.500000
#&gt; 5   5           7            7            7 7.000000
#&gt; 6   6           6           NA           NA 6.000000
#&gt; 7   7           7            5            6 6.000000
#&gt; 8   8           7            5            6 6.000000
#&gt; 9   9           6            5            5 5.333333
#&gt; 10 10           7            6            6 6.333333</div><div class='input'>
<span class='co'># can also just specify the position of the items in the dataset</span>
<span class='va'>dat</span><span class='op'>$</span><span class='va'>pa</span> <span class='op'>&lt;-</span> <span class='fu'>combitems</span><span class='op'>(</span><span class='fl'>2</span><span class='op'>:</span><span class='fl'>4</span>, data<span class='op'>=</span><span class='va'>dat</span><span class='op'>)</span>
</div><div class='co'>#&gt; Computed 'mean' for these items: mood_cheerf, mood_relaxed, mood_satisfi.</div><div class='input'><span class='va'>dat</span>
</div><div class='co'>#&gt;    id mood_cheerf mood_relaxed mood_satisfi       pa
#&gt; 1   1           5            6            6 5.666667
#&gt; 2   2           6            6            6 6.000000
#&gt; 3   3           6            6            5 5.666667
#&gt; 4   4           6            7           NA 6.500000
#&gt; 5   5           7            7            7 7.000000
#&gt; 6   6           6           NA           NA 6.000000
#&gt; 7   7           7            5            6 6.000000
#&gt; 8   8           7            5            6 6.000000
#&gt; 9   9           6            5            5 5.333333
#&gt; 10 10           7            6            6 6.333333</div><div class='input'>
<span class='co'># can specify the minimum number of required non-missing items</span>
<span class='co'># note: the mean for id=6 is NA because only one item is non-missing</span>
<span class='va'>dat</span><span class='op'>$</span><span class='va'>pa</span> <span class='op'>&lt;-</span> <span class='fu'>combitems</span><span class='op'>(</span><span class='st'>"mood"</span>, data<span class='op'>=</span><span class='va'>dat</span>, grep<span class='op'>=</span><span class='cn'>TRUE</span>, min.k<span class='op'>=</span><span class='fl'>2</span><span class='op'>)</span>
</div><div class='co'>#&gt; Computed 'mean' for these items: mood_cheerf, mood_relaxed, mood_satisfi.</div><div class='input'><span class='va'>dat</span>
</div><div class='co'>#&gt;    id mood_cheerf mood_relaxed mood_satisfi       pa
#&gt; 1   1           5            6            6 5.666667
#&gt; 2   2           6            6            6 6.000000
#&gt; 3   3           6            6            5 5.666667
#&gt; 4   4           6            7           NA 6.500000
#&gt; 5   5           7            7            7 7.000000
#&gt; 6   6           6           NA           NA       NA
#&gt; 7   7           7            5            6 6.000000
#&gt; 8   8           7            5            6 6.000000
#&gt; 9   9           6            5            5 5.333333
#&gt; 10 10           7            6            6 6.333333</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p><p>Developed by Wolfgang Viechtbauer, Mihail Constantin.</p></p>
</div>

<div class="pkgdown">
  <p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 1.6.1.9001.</p></p>
</div>

      </footer>
   </div>

  


  

  </body>
</html>


